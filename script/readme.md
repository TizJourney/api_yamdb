## Инструкция по запуску
* `./script/csw_sqlite3.py`
* Запускать из корневой папки (там где лежит `manage.py`)

## Запуск скрипта из другой папки
* Можно из другой папки, но тогда прописывайте пути до даных через `--data` и до базы данных через `-database`
* Запуск из директории со скриптом: `python csw_sqlite3.py --data ../data --database ../db.sqlite3`

### Помощь и описание всех опций
* `./script/csw_sqlite3.py --help`

### Режим холостого запуска
* `./script/csw_sqlite3.py --dummy`
* Вместо редактирования базы данных печатает команды и данные на экран

## Краткая инструкция
Скрипт создан для выполнения переноса базы из одного файла .csv.  
При желании можно сделать цикл для нескольких моделей.

В переменную **name_csv** записываем название файла .csv.  
В переменную **name_model** записываем название модели из проекта.  
Название файла .csv и название модели могут совпадать, поэтому в некоторых случаях всё можно заменить одной из этих переменных.

В переменную **name_app** записываем название приложения, в котором находится рассматриваемая модель.

Переменная **headers** - это просто первоначальное объявление заголовка таблицы.  
В этой переменной ничего не изменяем.

Строки 12-18 - часть кода для проверки работоспособности скрипта в том случае, если в базе ещё нет таблиц и их необходимо создать.

Строки 20-30 - код, который преобразует данные файла .csv в список списков :D

Переменные **count_headers** и **str_q** - это неоптимизированная абракадабра, которая нужна для выяснения количества знаков вопроса в запросе из строк 35-38.  
То есть изначальный вариант строки запроса для таблицы, например, **category** выглядел вот так:
``` sql
INSERT INTO nameapp_category (id, name, slug) VALUES (?, ?, ?);
```
С переменными **headers** и **str_q** он вяглядит так:
``` sql
INSERT INTO {name_app}_{name_model} {tuple(headers)} VALUES ({str_q});
```
где tuple(headers) - кортеж заголовков таблицы, str_q - набор знаков вопроса.

P.S. Я не знаю, как это записать лучше и правильнее, может кто-то из коллег предложит другой вариант